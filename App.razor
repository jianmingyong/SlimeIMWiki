@using SlimeIMWiki.Layouts
@using SlimeIMWiki.Services
@inject IWebApplicationService WebApplicationService

<Blazorise.ThemeProvider Theme="@theme">
    <Router AppAssembly="typeof(App).Assembly">
        <Found Context="routeData">
            <RouteView RouteData="routeData" DefaultLayout="typeof(MainLayout)"/>
        </Found>
        <NotFound>
            <Paragraph Position="Position.Absolute.Start.Is50.Top.Is50.Translate.Middle">
                Sorry, there's nothing at this address.
            </Paragraph>
        </NotFound>
    </Router>
    <MessageProvider/>
    <PageProgressProvider/>
</Blazorise.ThemeProvider>

@code {
    private readonly Theme theme = new()
    {
        BarOptions = new ThemeBarOptions
        {
            HorizontalHeight = "56px"
        },
        BodyOptions = new ThemeBodyOptions
        {
            TextColor = "#dee2e6"
        },
        BackgroundOptions = new BootstrapThemeBackgroundOptions
        {
            Primary = "rgb(13, 110, 253)",
            Secondary = "rgb(108, 117, 125)",
            Success = "rgb(25, 135, 84)",
            Danger = "rgb(220, 53, 69)",
            Warning = "rgb(255, 193, 7)",
            Info = "rgb(13, 202, 240)",
            Light = "rgb(248, 249, 250)",
            Dark = "rgb(33, 37, 41)",
            BodySecondary = "rgb(52, 58, 64)",
            Body = "rgb(33, 37, 41)"
        },
        TextColorOptions = new ThemeTextColorOptions
        {
            Primary = "rgb(13, 110, 253)",
            Secondary = "rgb(108, 117, 125)",
            Success = "rgb(25, 135, 84)",
            Danger = "rgb(220, 53, 69)",
            Warning = "rgb(255, 193, 7)",
            Info = "rgb(13, 202, 240)",
            Light = "rgb(248, 249, 250)",
            Dark = "rgb(33, 37, 41)",
            Body = "rgb(222, 226, 230)"
        }
    };

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await WebApplicationService.RegisterService();
        }
    }
}